/* GLOBAL / TRANSPARENT FOR OBS */

html,
body {
  margin: 0;
  padding: 0;
  background: transparent !important;
  overflow: hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

#overlay-root {
  position: relative;
  width: 100vw;
  height: 100vh;
}

#pack-scene {
  position: absolute;
  inset: 0;
  pointer-events: none;
  perspective: 1800px;
  transform-style: preserve-3d;
}

/* PACK CONTAINER (CENTERED) */

#pack-container {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 340px;
  height: 500px;
  transform: translate(-50%, -50%);
  transform-style: preserve-3d;
}

/* PACK BODY / FLAP SPLIT USING CLIP-PATH */

#pack-body-wrapper,
#pack-flap-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  width: 340px;
  overflow: hidden;
}

/* bottom ~74% of the image */
#pack-body {
  width: 340px;
  height: auto;
  clip-path: inset(6% 0 0 0);
  transform-origin: center top;
  filter: drop-shadow(0 22px 60px rgba(0, 0, 0, 0.9));
}

/* top ~26% of the image */
#pack-flap {
  width: 340px;
  height: auto;
  clip-path: inset(0 0 94% 0);
  transform-origin: center bottom;
  filter: drop-shadow(0 14px 40px rgba(0, 0, 0, 0.95));
}

/* REALISTIC TORN EDGE (shows after rip) */

#pack-body-wrapper::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 16px;
  /* jagged torn paper edge */
  background:
    radial-gradient(circle at 10% 100%, rgba(255, 255, 255, 0.9), transparent 60%),
    radial-gradient(circle at 30% 100%, rgba(255, 255, 255, 0.9), transparent 60%),
    radial-gradient(circle at 50% 100%, rgba(255, 255, 255, 0.9), transparent 60%),
    radial-gradient(circle at 70% 100%, rgba(255, 255, 255, 0.9), transparent 60%),
    radial-gradient(circle at 90% 100%, rgba(255, 255, 255, 0.9), transparent 60%);
  clip-path: polygon(
    0% 60%,
    8% 100%,
    15% 55%,
    25% 100%,
    35% 60%,
    45% 100%,
    55% 55%,
    65% 100%,
    75% 60%,
    85% 100%,
    92% 55%,
    100% 90%,
    100% 100%,
    0% 100%
  );
  opacity: 0;
  pointer-events: none;
  mix-blend-mode: screen;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.7));
  transition: opacity 0.15s ease-out;
}

#pack-body-wrapper.torn::before {
  opacity: 1;
}

/* HOLOGRAPHIC FOIL OVERLAY */

#pack-foil {
  position: absolute;
  inset: 0;
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: 0;
  background-image:
    linear-gradient(
      115deg,
      rgba(255, 255, 255, 0.3),
      rgba(255, 0, 255, 0.4),
      rgba(0, 255, 255, 0.5),
      rgba(255, 255, 0, 0.4),
      rgba(255, 255, 255, 0.3)
    );
  background-size: 200% 200%;
  border-radius: 12px;
}

/* CARD REVEAL */

#card-container {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 260px;
  height: 360px;
  transform: translate(-50%, -50%);
  transform-style: preserve-3d;
  perspective: 1600px;
  opacity: 0;
  z-index: 10;
}

#card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
}

#card-back,
#card-front {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border-radius: 18px;
  backface-visibility: hidden;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.9);
}

#card-back {
  transform: rotateY(0deg);
}

#card-front {
  transform: rotateY(180deg);
}

/* RARITY GLOW */

#card-container.rarity-common #card-inner {
  box-shadow: 0 0 20px rgba(200, 200, 200, 0.7);
}

#card-container.rarity-uncommon #card-inner {
  box-shadow: 0 0 26px rgba(0, 200, 255, 0.9);
}

#card-container.rarity-rare #card-inner {
  box-shadow: 0 0 30px rgba(140, 80, 255, 1);
}

#card-container.rarity-epic #card-inner {
  box-shadow: 0 0 34px rgba(255, 70, 210, 1);
}

#card-container.rarity-legendary #card-inner {
  box-shadow:
    0 0 40px rgba(255, 210, 70, 1),
    0 0 70px rgba(255, 255, 255, 0.9);
}

/* SPARKS & DEBRIS */

.spark,
.debris {
  position: absolute;
  top: 50%;
  left: 50%;
  pointer-events: none;
  opacity: 0;
}

.spark {
  width: 6px;
  height: 18px;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 1),
    rgba(255, 255, 255, 0.3),
    rgba(255, 255, 255, 0)
  );
  border-radius: 4px;
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.9));
  mix-blend-mode: screen;
}

.debris {
  width: 10px;
  height: 6px;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.95),
    rgba(255, 255, 255, 0.4)
  );
  border-radius: 2px;
  filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));
  mix-blend-mode: screen;
}

/* LABELS */

#label-wrapper {
  position: absolute;
  bottom: 7%;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  color: #fff;
  text-shadow: 0 0 8px #000, 0 0 12px #000;
}

#label-user {
  font-weight: 700;
  font-size: 18px;
}

#label-card {
  font-size: 16px;
  opacity: 0.95;
}

#label-rarity {
  font-size: 14px;
  opacity: 0.85;
}
